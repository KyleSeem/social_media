<!DOCTYPE html>
{% load staticfiles %}

<html lang="en">
    <head>
        <meta charset="UTF-8" name="description" content="">
        <title>KittenStagram</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <!-- google fonts -->
        <link href="https://fonts.googleapis.com/css?family=Leckerli+One|Pacifico|Satisfy" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="shortcut icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
        <script type="text/javascript" src="{% static 'social_media/js/masonry.js' %}"></script>
        <script type="text/javascript" src="{% static 'social_media/js/imagesloaded.js' %}"></script>
        <link rel="stylesheet" type="text/css" href="{% static 'social_media/css/style.css' %}">
        <!-- jquery functions -->
        <script>
            $(document).ready(function() {
                console.log('jquery');
                var newPhoto;

                var $grid = $('.grid').masonry({
                    itemSelector: '.grid-item',
                    percentPosition: true,
                    columnWidth: '.grid-sizer',
                    gutter: '.gutter-sizer',
                });

                $grid.imagesLoaded().progress( function() {
                    $grid.masonry();
                });

                var $preview = $("#preview");
                var $img_file = $('#img_file');

                $('#img_file').change(function() {
                    console.log($img_file.val());
                    temp = $img_file.val();
                    str = '<img src="';
                    str += temp;
                    str += '" />';
                    console.log(str);
                    // html = $.parseHTML(str);
                    $preview.append(str);
                })


            });
        </script>
    </head>
    <body>


        {% include 'social_media/nav_bar.html' %}

<!-- modal for new post/upload photo -->

        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <form class="form-horizontal" action="{% url 'social_media:new_message' %}" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="user_id" id="user_id" value="{{ sessionUser.id }}" />
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

                            <label id="img_label" class="btn btn-info" for="img_file">upload photo</label>
                            <input id="img_file" type="file" name="img_file" />
                        </div>

                        <div class="modal-body">
                            <div id="preview" class="thumbnail">

                            </div>
                            <textarea class="form-control" name="message" id="message" rows="2" placeholder="type message..."></textarea>
                        </div>

                        <div class="modal-footer">
                            <button class="btn btn-default" class="close" data-dismiss="modal" aria-label="close">Cancel</button>
                            <input class="btn btn-primary" type="submit" value="Submit" />
                        </div>
                    </form>
                </div>
            </div>
        </div>


    </body>
</html>
